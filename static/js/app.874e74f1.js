(function(t){function e(e){for(var o,r,c=e[0],l=e[1],s=e[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},a={app:0},i=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dgiot-konva-editior/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("6f50")},"0bd0":function(t,e,n){"use strict";n("b18b")},"0fce":function(t,e,n){"use strict";n("39f0")},"189c":function(t,e,n){"use strict";n("5665")},"18a8":function(t,e,n){"use strict";n("6cba")},"1ed0":function(t,e,n){},"21bb":function(t,e,n){"use strict";n("2560")},"225c":function(t,e,n){"use strict";n("8af3")},2560:function(t,e,n){},"264a":function(t,e,n){"use strict";n("f6cd")},"2b61":function(t,e,n){},"2c7d":function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return $}));var o,a,i=n("8511"),r=n("1e2e"),c=n("4360"),l=n("986e"),s=17,u=86,d=67,p=88,h=89,m=90,f=71,b=66,v=76,y=85,g=83,C=80,x=68,O=46,S=69,w=[66,67,68,69,71,76,80,83,85,86,88,89,90],j=(o={},Object(r["a"])(o,u,E),Object(r["a"])(o,h,A),Object(r["a"])(o,m,I),Object(r["a"])(o,g,V),Object(r["a"])(o,C,T),Object(r["a"])(o,S,B),o),k=Object(i["a"])(Object(i["a"])({},j),{},Object(r["a"])({},y,Y)),D=Object(i["a"])(Object(i["a"])({},j),{},(a={},Object(r["a"])(a,d,_),Object(r["a"])(a,p,L),Object(r["a"])(a,f,N),Object(r["a"])(a,b,P),Object(r["a"])(a,x,R),Object(r["a"])(a,O,R),Object(r["a"])(a,v,U),a)),M=!1;function $(){window.onkeydown=function(t){var e=c["a"].state.curComponent;t.keyCode==s?M=!0:t.keyCode==O&&e?(c["a"].commit("deleteComponent"),c["a"].commit("recordSnapshot")):M&&(e&&e.isLock?e&&e.isLock&&(t.preventDefault(),k[t.keyCode]&&k[t.keyCode]()):(t.preventDefault(),D[t.keyCode]&&D[t.keyCode]()))},window.onkeyup=function(t){t.keyCode==s&&(M=!1)}}function _(){c["a"].commit("copy")}function E(){c["a"].commit("paste"),c["a"].commit("recordSnapshot")}function L(){c["a"].commit("cut")}function A(){c["a"].commit("redo")}function I(){c["a"].commit("undo")}function N(){c["a"].state.areaData.components.length&&(c["a"].commit("compose"),c["a"].commit("recordSnapshot"))}function P(){var t=c["a"].state.curComponent;t&&!t.isLock&&"Group"==t.component&&(c["a"].commit("decompose"),c["a"].commit("recordSnapshot"))}function V(){l["a"].$emit("save")}function T(){l["a"].$emit("preview")}function R(){c["a"].state.curComponent&&(c["a"].commit("deleteComponent"),c["a"].commit("recordSnapshot"))}function B(){l["a"].$emit("clearCanvas")}function U(){c["a"].commit("lock")}function Y(){c["a"].commit("unlock")}},"2ebf":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{overflow:"hidden"}},[n("img",{attrs:{src:t.propValue}})])},a=[],i={name:"Picture",props:{propValue:{type:String,require:!0},element:{type:Object}}},r=i,c=(n("c812"),n("838c")),l=Object(c["a"])(r,o,a,!1,null,"20c237dc",null);e["default"]=l.exports},3354:function(t,e,n){"use strict";n("52f7")},"358a":function(t,e,n){},"39f0":function(t,e,n){},4360:function(t,e,n){"use strict";var o=n("8511"),a=(n("d2bf"),n("1ec0")),i=n("bbf5"),r={mutations:{addAnimation:function(t,e){var n=t.curComponent;n.animations.push(e)},removeAnimation:function(t,e){var n=t.curComponent;n.animations.splice(e,1)}}},c=n("4c00"),l=(n("756a"),n("ac24")),s=n("986e"),u=n("fa7d"),d=n("a2ba");function p(t,e,n){var o=Object(u["a"])("#component".concat(t.id)).getBoundingClientRect(),a={x:o.left-e.left+o.width/2,y:o.top-e.top+o.height/2};t.style.rotate=Object(d["e"])(t.style.rotate+n.rotate),t.style.width=parseFloat(t.groupStyle.width)/100*n.width,t.style.height=parseFloat(t.groupStyle.height)/100*n.height,t.style.left=a.x-t.style.width/2,t.style.top=a.y-t.style.height/2,t.groupStyle={}}var h=n("4e67"),m=(n("0bd2"),n("a7f7"));function f(t){var e=t.style;t.propValue.forEach((function(t){if(!Object.keys(t.groupStyle).length){var n=Object(o["a"])({},t.style);t.groupStyle=Object(m["b"])(n),t.groupStyle.left=Object(d["g"])((n.left-e.left)/e.width),t.groupStyle.top=Object(d["g"])((n.top-e.top)/e.height),t.groupStyle.width=Object(d["g"])(n.width/e.width),t.groupStyle.height=Object(d["g"])(n.height/e.height)}}))}var b={state:{areaData:{style:{top:0,left:0,width:0,height:0},components:[]},editor:null},mutations:{getEditor:function(t){t.editor=Object(u["a"])("#editor")},setAreaData:function(t,e){t.areaData=e},compose:function(t){var e=t.componentData,n=t.areaData,a=t.editor,i=[];n.components.forEach((function(t){if("Group"!=t.component)i.push(t);else{var e=Object(o["a"])({},t.style),n=t.propValue,r=a.getBoundingClientRect();j.commit("deleteComponent"),n.forEach((function(t){p(t,r,e),j.commit("addComponent",{component:t})})),i.push.apply(i,Object(c["a"])(t.propValue)),j.commit("batchDeleteComponent",t.propValue)}}));var r=Object(o["a"])(Object(o["a"])({id:Object(l["a"])(),component:"Group"},h["a"]),{},{style:Object(o["a"])(Object(o["a"])({},h["b"]),n.style),propValue:i});f(r),j.commit("addComponent",{component:r}),s["a"].$emit("hideArea"),j.commit("batchDeleteComponent",n.components),j.commit("setCurComponent",{component:e[e.length-1],index:e.length-1}),n.components=[]},batchDeleteComponent:function(t,e){var n=t.componentData;e.forEach((function(t){for(var e=0,o=n.length;e<o;e++)if(t.id==n[e].id){n.splice(e,1);break}}))},decompose:function(t){var e=t.curComponent,n=t.editor,a=Object(o["a"])({},e.style),i=e.propValue,r=n.getBoundingClientRect();j.commit("deleteComponent"),i.forEach((function(t){p(t,r,a),j.commit("addComponent",{component:t})}))}}},v={state:{menuTop:0,menuLeft:0,menuShow:!1},mutations:{showContextMenu:function(t,e){var n=e.top,o=e.left;t.menuShow=!0,t.menuTop=n,t.menuLeft=o},hideContextMenu:function(t){t.menuShow=!1}}},y=n("eae4"),g={state:{copyData:null,isCut:!1},mutations:{copy:function(t){t.curComponent&&(t.copyData={data:Object(u["b"])(t.curComponent),index:t.curComponentIndex},t.isCut=!1)},paste:function(t,e){if(t.copyData){var n=t.copyData.data;e?(n.style.top=t.menuTop,n.style.left=t.menuLeft):(n.style.top+=10,n.style.left+=10),n.id=Object(l["a"])(),"Group"===n.component&&n.propValue.forEach((function(t){t.id=Object(l["a"])()})),j.commit("addComponent",{component:Object(u["b"])(n)}),t.isCut&&(t.copyData=null)}else Object(y["a"])("请选择组件")},cut:function(t){if(t.curComponent){if(t.copyData){var e=Object(u["b"])(t.copyData.data),n=t.copyData.index;e.id=Object(l["a"])(),j.commit("addComponent",{component:e,index:n}),t.curComponentIndex>=n&&t.curComponentIndex++}j.commit("copy"),j.commit("deleteComponent"),t.isCut=!0}else Object(y["a"])("请选择组件")}}},C={mutations:{addEvent:function(t,e){var n=t.curComponent,o=e.event,a=e.param;n.events[o]=a},removeEvent:function(t,e){var n=t.curComponent;a["default"]["delete"](n.events,e)}}},x={mutations:{upComponent:function(t){var e=t.componentData,n=t.curComponentIndex;n<e.length-1?Object(u["c"])(e,n,n+1):Object(y["a"])("已经到顶了")},downComponent:function(t){var e=t.componentData,n=t.curComponentIndex;n>0?Object(u["c"])(e,n,n-1):Object(y["a"])("已经到底了")},topComponent:function(t){var e=t.componentData,n=t.curComponentIndex,o=t.curComponent;n<e.length-1?(e.splice(n,1),e.push(o)):Object(y["a"])("已经到顶了")},bottomComponent:function(t){var e=t.componentData,n=t.curComponentIndex,o=t.curComponent;n>0?(e.splice(n,1),e.unshift(o)):Object(y["a"])("已经到底了")}}},O=(n("3aaa"),n("092f"),{state:{snapshotData:[],snapshotIndex:-1},mutations:{undo:function(t){if(t.snapshotIndex>=0){t.snapshotIndex--;var e=Object(u["b"])(t.snapshotData[t.snapshotIndex])||[];if(t.curComponent){var n=!e.find((function(e){return t.curComponent.id===e.id}));n&&j.commit("setCurComponent",{component:null,index:null})}j.commit("setComponentData",e)}},redo:function(t){t.snapshotIndex<t.snapshotData.length-1&&(t.snapshotIndex++,j.commit("setComponentData",Object(u["b"])(t.snapshotData[t.snapshotIndex])))},recordSnapshot:function(t){t.snapshotData[++t.snapshotIndex]=Object(u["b"])(t.componentData),t.snapshotIndex<t.snapshotData.length-1&&(t.snapshotData=t.snapshotData.slice(0,t.snapshotIndex+1))}}}),S={mutations:{lock:function(t){var e=t.curComponent;e.isLock=!0},unlock:function(t){var e=t.curComponent;e.isLock=!1}}};a["default"].use(i["a"]);var w={state:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},r.state),b.state),v.state),g.state),C.state),x.state),O.state),S.state),{},{editMode:"edit",canvasStyleData:{width:1200,height:740,scale:100},componentData:[],curComponent:null,curComponentIndex:null,isClickComponent:!1}),mutations:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},r.mutations),b.mutations),v.mutations),g.mutations),C.mutations),x.mutations),O.mutations),S.mutations),{},{setClickComponentStatus:function(t,e){t.isClickComponent=e},setEditMode:function(t,e){t.editMode=e},setCanvasStyle:function(t,e){t.canvasStyleData=e},setCurComponent:function(t,e){var n=e.component,o=e.index;t.curComponent=n,t.curComponentIndex=o},setShapeStyle:function(t,e){var n=t.curComponent,o=e.top,a=e.left,i=e.width,r=e.height,c=e.rotate;o&&(n.style.top=o),a&&(n.style.left=a),i&&(n.style.width=i),r&&(n.style.height=r),c&&(n.style.rotate=c)},setShapeSingleStyle:function(t,e){var n=t.curComponent,o=e.key,a=e.value;n.style[o]=a},setComponentData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a["default"].set(t,"componentData",e)},addComponent:function(t,e){var n=e.component,o=e.index;void 0!==o?t.componentData.splice(o,0,n):t.componentData.push(n)},deleteComponent:function(t,e){void 0===e&&(e=t.curComponentIndex),e==t.curComponentIndex&&(t.curComponentIndex=null,t.curComponent=null),t.componentData.splice(e,1)}})},j=e["a"]=new i["a"].Store(w)},"4bc6":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"edit"==t.editMode?n("div",{staticClass:"v-text",on:{keydown:t.handleKeydown,keyup:t.handleKeyup}},[n("div",{ref:"text",class:{canEdit:t.canEdit},style:{verticalAlign:t.element.style.verticalAlign},attrs:{contenteditable:t.canEdit,tabindex:t.element.id},domProps:{innerHTML:t._s(t.element.propValue)},on:{blur:t.handleBlur,dblclick:t.setEdit,input:t.handleInput,mousedown:t.handleMousedown,paste:t.clearStyle}})]):n("div",{staticClass:"v-text preview"},[n("div",{style:{verticalAlign:t.element.style.verticalAlign},domProps:{innerHTML:t._s(t.element.propValue)}})])},a=[],i=n("8511"),r=(n("f863"),n("bdd2"),n("bbf5")),c=n("2c7d"),l={name:"VText",props:{propValue:{type:String,require:!0},element:{type:Object}},data:function(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(i["a"])({},Object(r["b"])(["editMode"])),methods:{handleInput:function(t){this.$emit("input",this.element,t.target.innerHTML)},handleKeydown:function(t){t.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&c["a"].includes(t.keyCode)||46==t.keyCode)&&t.stopPropagation()},handleKeyup:function(t){t.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(t){this.canEdit&&t.stopPropagation()},clearStyle:function(t){t.preventDefault();var e=t.clipboardData,n=e.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,t.target.innerHTML)},handleBlur:function(t){var e=this;this.element.propValue=t.target.innerHTML||"&nbsp;";var n=t.target.innerHTML;""!==n?this.element.propValue=t.target.innerHTML:(this.element.propValue="",this.$nextTick((function(){e.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(t){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}},s=l,u=(n("3354"),n("838c")),d=Object(u["a"])(s,o,a,!1,null,"aae7fd62",null);e["default"]=d.exports},"4e67":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}));for(var o=n("8511"),a={rotate:0,opacity:1},i={animations:[],events:{},groupStyle:{},isLock:!1},r=[{component:"v-text",label:"文字",propValue:"双击编辑文字",icon:"wenben",style:{width:200,height:22,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{component:"v-button",label:"按钮",propValue:"按钮",icon:"button",style:{width:100,height:34,borderWidth:1,borderColor:"",borderRadius:"",fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{component:"Picture",label:"图片",icon:"tupian",propValue:n("b2e4"),style:{width:300,height:200,borderRadius:""}},{component:"rect-shape",label:"矩形",propValue:"&nbsp;",icon:"juxing",style:{width:200,height:200,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",verticalAlign:"middle"}}],c=0,l=r.length;c<l;c++){var s=r[c];s.style=Object(o["a"])(Object(o["a"])({},a),s.style),r[c]=Object(o["a"])(Object(o["a"])({},i),s)}e["c"]=r},"4fe4":function(t,e,n){},"52f7":function(t,e,n){},"555e":function(t,e,n){"use strict";n("d56e")},5665:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("f43e"),n("4301"),n("b668"),n("03f1");var o=n("1ec0"),a=n("4418"),i=n.n(a),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},c=[],l=(n("034f"),n("838c")),s={},u=Object(l["a"])(s,r,c,!1,null,null,null),d=u.exports,p=n("4360"),h=n("501b"),m=(n("6057"),n("770c"),n("a77f"),n("86a2"));o["default"].use(m["a"]);var f=[{path:"/",name:"Home",component:function(){return Promise.resolve().then((function(){return Object(h["a"])(n("bb51"))}))}}],b=new m["a"]({routes:f}),v=(n("756a"),n("eb9c"),n("7d91"));v.keys().forEach((function(t){var e=v(t),n=e["default"].name;n&&o["default"].component(n,e["default"]||e)}));n("be35"),n("ab97"),n("7ac3"),n("5a8b");o["default"].use(i.a,{size:"small"}),o["default"].config.productionTip=!1,new o["default"]({el:"#app",router:b,store:p["a"],render:function(t){return t(d)}})},"5a8b":function(t,e,n){},"5aeb":function(t,e,n){},"6a9b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group"},[n("div",[t._l(t.propValue,(function(t){return[n(t.component,{key:t.id,tag:"component",staticClass:"component",style:t.groupStyle,attrs:{propValue:t.propValue,id:"component"+t.id,element:t}})]}))],2)])},a=[],i={name:"Group",props:{propValue:{type:Array,default:function(){return[]}},element:{type:Object}}},r=i,c=(n("18a8"),n("838c")),l=Object(c["a"])(r,o,a,!1,null,"736cb89f",null);e["default"]=l.exports},"6cba":function(t,e,n){},"6e50":function(t,e,n){},"6f50":function(t,e,n){},"7a18":function(t,e,n){"use strict";n("5aeb")},"7bcc":function(t,e,n){},"7d5c":function(t,e,n){"use strict";n("6e50")},"7d91":function(t,e,n){var o={"./Group.vue":"6a9b","./Picture.vue":"2ebf","./RectShape.vue":"c8d9","./VButton.vue":"d3cc","./VText.vue":"4bc6"};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id="7d91"},"7e5e":function(t,e,n){"use strict";n("d647")},"862b":function(t,e,n){"use strict";n("a55a")},"8af3":function(t,e,n){},"8b99":function(t,e,n){"use strict";n("2b61")},"91ec":function(t,e,n){},"986e":function(t,e,n){"use strict";var o=n("1ec0");e["a"]=new o["default"]},"9bfa":function(t,e,n){"use strict";n("e7a4")},a20b:function(t,e,n){"use strict";n("fed9")},a2ba:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return d}));var o=n("4360");function a(t){return t*Math.PI/180}function i(t,e,n){return{x:(t.x-e.x)*Math.cos(a(n))-(t.y-e.y)*Math.sin(a(n))+e.x,y:(t.x-e.x)*Math.sin(a(n))+(t.y-e.y)*Math.cos(a(n))+e.y}}function r(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}function c(t){return Math.abs(Math.sin(a(t)))}function l(t){return Math.abs(Math.cos(a(t)))}function s(t){return(t+360)%360}function u(t){return t*parseInt(o["a"].state.canvasStyleData.scale)/100}function d(t){return 100*t+"%"}},a55a:function(t,e,n){},a7f7:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var o=n("8511"),a=(n("756a"),n("0bd2"),n("f863"),n("bdd2"),n("a2ba"));function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["fontSize","width","height","top","left","borderWidth","letterSpacing","borderRadius"],o={};return Object.keys(t).forEach((function(a){e.includes(a)||("rotate"!=a?(o[a]=t[a],n.includes(a)&&(o[a]+="px")):o.transform=a+"("+t[a]+"deg)")})),o}function r(t){if(t=Object(o["a"])({},t),0!=t.rotate){var e=t.width*Object(a["c"])(t.rotate)+t.height*Object(a["f"])(t.rotate),n=(t.width-e)/2;t.left+=n,t.right=t.left+e;var i=t.height*Object(a["c"])(t.rotate)+t.width*Object(a["f"])(t.rotate),r=(i-t.height)/2;t.top-=r,t.bottom=t.top+i,t.width=e,t.height=i}else t.bottom=t.top+t.height,t.right=t.left+t.width;return t}},ab97:function(t,e,n){},ac24:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=0;function a(){return o++}},b18b:function(t,e,n){},b2e4:function(t,e,n){t.exports=n.p+"static/img/title.ac55a42f.jpg"},bb51:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Toolbar"),n("main",[n("section",{staticClass:"left"},[n("ComponentList")],1),n("section",{staticClass:"center"},[n("div",{staticClass:"content",on:{dragover:t.handleDragOver,drop:t.handleDrop,mousedown:t.handleMouseDown,mouseup:t.deselectCurComponent}},[n("Editor")],1)]),n("section",{staticClass:"right"},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"属性",name:"attr"}},[t.curComponent?n("AttrList"):n("p",{staticClass:"placeholder"},[t._v("请选择组件")])],1),n("el-tab-pane",{attrs:{label:"动画",name:"animation"}},[t.curComponent?n("AnimationList"):n("p",{staticClass:"placeholder"},[t._v("请选择组件")])],1),n("el-tab-pane",{attrs:{label:"事件",name:"events"}},[t.curComponent?n("EventList"):n("p",{staticClass:"placeholder"},[t._v("请选择组件")])],1),n("el-tab-pane",{attrs:{label:"数据",name:"monacoEditor"}},[t.topoCode?n("MonacoEditor",{ref:"MonacoEditor",attrs:{code:t.topoCode,options:t.options,randomkey:t.randomkey}}):t._e()],1)],1)],1)])],1)},a=[],i=n("8511"),r=(n("756a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor",class:{edit:t.isEdit},style:{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:t.handleContextMenu,mousedown:t.handleMouseDown}},[n("Grid"),t._l(t.componentData,(function(e,o){return n("Shape",{key:e.id,class:{lock:e.isLock},style:t.getShapeStyle(e.style),attrs:{defaultStyle:e.style,active:e.id===(t.curComponent||{}).id,element:e,index:o}},["v-text"!=e.component?n(e.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(e.style),attrs:{propValue:e.propValue,element:e,id:"component"+e.id}}):n(e.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(e.style),attrs:{propValue:e.propValue,element:e,id:"component"+e.id},on:{input:t.handleInput}})],1)})),n("ContextMenu"),n("MarkLine"),n("Area",{directives:[{name:"show",rawName:"v-show",value:t.isShowArea,expression:"isShowArea"}],attrs:{start:t.start,width:t.width,height:t.height}})],2)}),c=[],l=(n("f863"),n("bdd2"),n("ceda"),n("5a14"),n("bbf5")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shape",class:{active:t.active},on:{click:t.selectCurComponent,mousedown:t.handleMouseDownOnShape}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:t.handleRotate}}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),t._l(t.isActive()?t.pointList:[],(function(e){return n("div",{key:e,staticClass:"shape-point",style:t.getPointStyle(e),on:{mousedown:function(n){return t.handleMouseDownOnPoint(e,n)}}})})),t._t("default")],2)},u=[],d=n("2d5f"),p=(n("cd05"),n("986e")),h=n("0efa");n("3f1f"),n("6057");function m(t){return f.apply(this,arguments)}function f(){return f=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,o,a,i,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:[],o=function(t){return new Promise((function(n){e.classList.add(t.value,"animated");var o=function o(){e.removeEventListener("animationend",o),e.removeEventListener("animationcancel",o),e.classList.remove(t.value,"animated"),n()};e.addEventListener("animationend",o),e.addEventListener("animationcancel",o)}))},a=0,i=n.length;case 3:if(!(a<i)){t.next=9;break}return t.next=6,o(n[a]);case 6:a++,t.next=3;break;case 9:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}var b=n("a2ba"),v={lt:y,t:O,rt:g,r:S,rb:C,b:w,lb:x,l:j};function y(t,e,n,o,a){var i=a.symmetricPoint,r=Object(b["d"])(e,i),c=Object(b["a"])(e,r,-t.rotate),l=Object(b["a"])(i,r,-t.rotate),s=l.x-c.x,u=l.y-c.y;if(o){s/u>n?(c.x+=Math.abs(s-u*n),s=u*n):(c.y+=Math.abs(u-s/n),u=s/n);var d=Object(b["a"])(c,r,t.rotate);r=Object(b["d"])(d,i),c=Object(b["a"])(d,r,-t.rotate),l=Object(b["a"])(i,r,-t.rotate),s=l.x-c.x,u=l.y-c.y}s>0&&u>0&&(t.width=Math.round(s),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(c.y))}function g(t,e,n,o,a){var i=a.symmetricPoint,r=Object(b["d"])(e,i),c=Object(b["a"])(e,r,-t.rotate),l=Object(b["a"])(i,r,-t.rotate),s=c.x-l.x,u=l.y-c.y;if(o){s/u>n?(c.x-=Math.abs(s-u*n),s=u*n):(c.y+=Math.abs(u-s/n),u=s/n);var d=Object(b["a"])(c,r,t.rotate);r=Object(b["d"])(d,i),c=Object(b["a"])(d,r,-t.rotate),l=Object(b["a"])(i,r,-t.rotate),s=c.x-l.x,u=l.y-c.y}s>0&&u>0&&(t.width=Math.round(s),t.height=Math.round(u),t.left=Math.round(l.x),t.top=Math.round(c.y))}function C(t,e,n,o,a){var i=a.symmetricPoint,r=Object(b["d"])(e,i),c=Object(b["a"])(i,r,-t.rotate),l=Object(b["a"])(e,r,-t.rotate),s=l.x-c.x,u=l.y-c.y;if(o){s/u>n?(l.x-=Math.abs(s-u*n),s=u*n):(l.y-=Math.abs(u-s/n),u=s/n);var d=Object(b["a"])(l,r,t.rotate);r=Object(b["d"])(d,i),c=Object(b["a"])(i,r,-t.rotate),l=Object(b["a"])(d,r,-t.rotate),s=l.x-c.x,u=l.y-c.y}s>0&&u>0&&(t.width=Math.round(s),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(c.y))}function x(t,e,n,o,a){var i=a.symmetricPoint,r=Object(b["d"])(e,i),c=Object(b["a"])(i,r,-t.rotate),l=Object(b["a"])(e,r,-t.rotate),s=c.x-l.x,u=l.y-c.y;if(o){s/u>n?(l.x+=Math.abs(s-u*n),s=u*n):(l.y-=Math.abs(u-s/n),u=s/n);var d=Object(b["a"])(l,r,t.rotate);r=Object(b["d"])(d,i),c=Object(b["a"])(i,r,-t.rotate),l=Object(b["a"])(d,r,-t.rotate),s=c.x-l.x,u=l.y-c.y}s>0&&u>0&&(t.width=Math.round(s),t.height=Math.round(u),t.left=Math.round(l.x),t.top=Math.round(c.y))}function O(t,e,n,o,a){var i=a.symmetricPoint,r=a.curPoint,c=Object(b["a"])(e,r,-t.rotate),l=Object(b["a"])({x:r.x,y:c.y},r,t.rotate),s=Math.sqrt(Math.pow(l.x-i.x,2)+Math.pow(l.y-i.y,2)),u={x:l.x-(l.x-i.x)/2,y:l.y+(i.y-l.y)/2},d=t.width;o&&(d=s*n),t.width=d,t.height=Math.round(s),t.top=Math.round(u.y-s/2),t.left=Math.round(u.x-t.width/2)}function S(t,e,n,o,a){var i=a.symmetricPoint,r=a.curPoint,c=Object(b["a"])(e,r,-t.rotate),l=Object(b["a"])({x:c.x,y:r.y},r,t.rotate),s=Math.sqrt(Math.pow(l.x-i.x,2)+Math.pow(l.y-i.y,2)),u={x:l.x-(l.x-i.x)/2,y:l.y+(i.y-l.y)/2},d=t.height;o&&(d=s/n),t.height=d,t.width=Math.round(s),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-s/2)}function w(t,e,n,o,a){var i=a.symmetricPoint,r=a.curPoint,c=Object(b["a"])(e,r,-t.rotate),l=Object(b["a"])({x:r.x,y:c.y},r,t.rotate),s=Math.sqrt(Math.pow(l.x-i.x,2)+Math.pow(l.y-i.y,2)),u={x:l.x-(l.x-i.x)/2,y:l.y+(i.y-l.y)/2},d=t.width;o&&(d=s*n),t.width=d,t.height=Math.round(s),t.top=Math.round(u.y-s/2),t.left=Math.round(u.x-t.width/2)}function j(t,e,n,o,a){var i=a.symmetricPoint,r=a.curPoint,c=Object(b["a"])(e,r,-t.rotate),l=Object(b["a"])({x:c.x,y:r.y},r,t.rotate),s=Math.sqrt(Math.pow(l.x-i.x,2)+Math.pow(l.y-i.y,2)),u={x:l.x-(l.x-i.x)/2,y:l.y+(i.y-l.y)/2},d=t.height;o&&(d=s/n),t.height=d,t.width=Math.round(s),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-s/2)}function k(t,e,n,o,a,i){v[t](e,n,o,a,i)}var D={props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object},defaultStyle:{require:!0,type:Object},index:{require:!0,type:[Number,String]}},data:function(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:Object(l["b"])(["curComponent","editor"]),mounted:function(){var t=this;this.curComponent&&(this.cursors=this.getCursor()),p["a"].$on("runAnimation",(function(){t.element==t.curComponent&&m(t.$el,t.curComponent.animations)}))},methods:{isActive:function(){return this.active&&!this.element.isLock},handleRotate:function(t){var e=this;this.$store.commit("setClickComponentStatus",!0),t.preventDefault(),t.stopPropagation();var n=Object(i["a"])({},this.defaultStyle),o=t.clientY,a=t.clientX,r=n.rotate,c=this.$el.getBoundingClientRect(),l=c.left+c.width/2,s=c.top+c.height/2,u=Math.atan2(o-s,a-l)/(Math.PI/180),d=!1,p=function(t){d=!0;var o=t.clientX,a=t.clientY,i=Math.atan2(a-s,o-l)/(Math.PI/180);n.rotate=r+i-u,e.$store.commit("setShapeStyle",n)},h=function t(){d&&e.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),e.cursors=e.getCursor()};document.addEventListener("mousemove",p),document.addEventListener("mouseup",h)},getPointStyle:function(t){var e=this.defaultStyle,n=e.width,o=e.height,a=/t/.test(t),i=/b/.test(t),r=/l/.test(t),c=/r/.test(t),l=0,s=0;2===t.length?(l=r?0:n,s=a?0:o):((a||i)&&(l=n/2,s=a?0:o),(r||c)&&(l=r?0:n,s=Math.floor(o/2)));var u={marginLeft:"-4px",marginTop:"-4px",left:"".concat(l,"px"),top:"".concat(s,"px"),cursor:this.cursors[t]};return u},getCursor:function(){var t=this.angleToCursor,e=this.initialAngle,n=this.pointList,o=this.curComponent,a=Object(b["e"])(o.style.rotate),i={},r=-1;return n.forEach((function(n){var o=Object(b["e"])(e[n]+a),c=t.length;while(1){r=(r+1)%c;var l=t[r];if(o<23||o>=338)return void(i[n]="nw-resize");if(l.start<=o&&o<l.end)return void(i[n]=l.cursor+"-resize")}})),i},handleMouseDownOnShape:function(t){var e=this;if(this.$store.commit("setClickComponentStatus",!0),"v-text"!=this.element.component&&"rect-shape"!=this.element.component&&t.preventDefault(),t.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),!this.element.isLock){this.cursors=this.getCursor();var n=Object(i["a"])({},this.defaultStyle),o=t.clientY,a=t.clientX,r=Number(n.top),c=Number(n.left),l=!1,s=function(t){l=!0;var i=t.clientX,s=t.clientY;n.top=s-o+r,n.left=i-a+c,e.$store.commit("setShapeStyle",n),e.$nextTick((function(){p["a"].$emit("move",s-o>0,i-a>0)}))},u=function t(){l&&e.$store.commit("recordSnapshot"),p["a"].$emit("unmove"),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",u)}},selectCurComponent:function(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextMenu")},handleMouseDownOnPoint:function(t,e){var n=this;this.$store.commit("setClickComponentStatus",!0),e.stopPropagation(),e.preventDefault();var o=Object(i["a"])({},this.defaultStyle),a=o.width/o.height,r={x:o.left+o.width/2,y:o.top+o.height/2},c=this.editor.getBoundingClientRect(),l=e.target.getBoundingClientRect(),s={x:Math.round(l.left-c.left+e.target.offsetWidth/2),y:Math.round(l.top-c.top+e.target.offsetHeight/2)},u={x:r.x-(s.x-r.x),y:r.y-(s.y-r.y)},d=!1,p=!0,h=this.isNeedLockProportion(),m=function(e){if(p)p=!1;else{d=!0;var i={x:e.clientX-c.left,y:e.clientY-c.top};k(t,o,i,a,h,{center:r,curPoint:s,symmetricPoint:u}),n.$store.commit("setShapeStyle",o)}},f=function t(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",t),d&&n.$store.commit("recordSnapshot")};document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)},isNeedLockProportion:function(){if("Group"!=this.element.component)return!1;var t,e=[0,90,180,360],n=Object(d["a"])(this.element.propValue);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!e.includes(Object(b["e"])(parseInt(o.style.rotate))))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}}},M=D,$=(n("862b"),n("838c")),_=Object($["a"])(M,s,u,!1,null,"53c51096",null),E=_.exports,L=n("a7f7"),A=n("fa7d"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:t.menuTop+"px",left:t.menuLeft+"px"}},[n("ul",{on:{mouseup:t.handleMouseUp}},[t.curComponent?[t.curComponent.isLock?n("li",{on:{click:t.unlock}},[t._v("解锁")]):[n("li",{on:{click:t.copy}},[t._v("复制")]),n("li",{on:{click:t.paste}},[t._v("粘贴")]),n("li",{on:{click:t.cut}},[t._v("剪切")]),n("li",{on:{click:t.deleteComponent}},[t._v("删除")]),n("li",{on:{click:t.lock}},[t._v("锁定")]),n("li",{on:{click:t.topComponent}},[t._v("置顶")]),n("li",{on:{click:t.bottomComponent}},[t._v("置底")]),n("li",{on:{click:t.upComponent}},[t._v("上移")]),n("li",{on:{click:t.downComponent}},[t._v("下移")])]]:n("li",{on:{click:t.paste}},[t._v("粘贴")])],2)])},N=[],P={data:function(){return{copyData:null}},computed:Object(l["b"])(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock:function(){this.$store.commit("lock")},unlock:function(){this.$store.commit("unlock")},handleMouseUp:function(){this.$store.commit("setClickComponentStatus",!0)},cut:function(){this.$store.commit("cut")},copy:function(){this.$store.commit("copy")},paste:function(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent:function(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent:function(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent:function(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent:function(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent:function(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},V=P,T=(n("189c"),Object($["a"])(V,I,N,!1,null,"b828f8f4",null)),R=T.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mark-line"},t._l(t.lines,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.lineStatus[e]||!1,expression:"lineStatus[line] || false"}],key:e,ref:e,refInFor:!0,staticClass:"line",class:e.includes("x")?"xline":"yline"})})),0)},U=[],Y=(n("0bd2"),{data:function(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:Object(l["b"])(["curComponent","componentData"]),mounted:function(){var t=this;p["a"].$on("move",(function(e,n){t.showLine(e,n)})),p["a"].$on("unmove",(function(){t.hideLine()}))},methods:{hideLine:function(){var t=this;Object.keys(this.lineStatus).forEach((function(e){t.lineStatus[e]=!1}))},showLine:function(t,e){var n=this,o=this.$refs,a=this.componentData,i=Object(L["a"])(this.curComponent.style),r=i.width/2,c=i.height/2;this.hideLine(),a.forEach((function(a){if(a!=n.curComponent){var l=Object(L["a"])(a.style),s=l.top,u=l.left,d=l.bottom,p=l.right,h=l.width/2,m=l.height/2,f={top:[{isNearly:n.isNearly(i.top,s),lineNode:o.xt[0],line:"xt",dragShift:s,lineShift:s},{isNearly:n.isNearly(i.bottom,s),lineNode:o.xt[0],line:"xt",dragShift:s-i.height,lineShift:s},{isNearly:n.isNearly(i.top+c,s+m),lineNode:o.xc[0],line:"xc",dragShift:s+m-c,lineShift:s+m},{isNearly:n.isNearly(i.top,d),lineNode:o.xb[0],line:"xb",dragShift:d,lineShift:d},{isNearly:n.isNearly(i.bottom,d),lineNode:o.xb[0],line:"xb",dragShift:d-i.height,lineShift:d}],left:[{isNearly:n.isNearly(i.left,u),lineNode:o.yl[0],line:"yl",dragShift:u,lineShift:u},{isNearly:n.isNearly(i.right,u),lineNode:o.yl[0],line:"yl",dragShift:u-i.width,lineShift:u},{isNearly:n.isNearly(i.left+r,u+h),lineNode:o.yc[0],line:"yc",dragShift:u+h-r,lineShift:u+h},{isNearly:n.isNearly(i.left,p),lineNode:o.yr[0],line:"yr",dragShift:p,lineShift:p},{isNearly:n.isNearly(i.right,p),lineNode:o.yr[0],line:"yr",dragShift:p-i.width,lineShift:p}]},b=[],v=n.curComponent.style.rotate;Object.keys(f).forEach((function(t){f[t].forEach((function(e){e.isNearly&&(n.$store.commit("setShapeSingleStyle",{key:t,value:0!=v?n.translatecurComponentShift(t,e,i):e.dragShift}),e.lineNode.style[t]="".concat(e.lineShift,"px"),b.push(e.line))}))})),b.length&&n.chooseTheTureLine(b,t,e)}}))},translatecurComponentShift:function(t,e,n){var o=this.curComponent.style,a=o.width,i=o.height;return"top"==t?Math.round(e.dragShift-(i-n.height)/2):Math.round(e.dragShift-(a-n.width)/2)},chooseTheTureLine:function(t,e,n){n?t.includes("yr")?this.lineStatus.yr=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yl")&&(this.lineStatus.yl=!0):t.includes("yl")?this.lineStatus.yl=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yr")&&(this.lineStatus.yr=!0),e?t.includes("xb")?this.lineStatus.xb=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xt")&&(this.lineStatus.xt=!0):t.includes("xt")?this.lineStatus.xt=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xb")&&(this.lineStatus.xb=!0)},isNearly:function(t,e){return Math.abs(t-e)<=this.diff}}}),X=Y,q=(n("e009"),Object($["a"])(X,B,U,!1,null,"7f684b20",null)),z=q.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}})},G=[],H={props:{start:{type:Object},width:{type:Number},height:{type:Number}}},K=H,J=(n("7a18"),Object($["a"])(K,W,G,!1,null,"8de372ba",null)),F=J.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[n("defs",[n("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[n("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),n("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),n("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),n("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},Z=[],tt=(n("a20b"),{}),et=Object($["a"])(tt,Q,Z,!1,null,"4469138e",null),nt=et.exports,ot={props:{isEdit:{type:Boolean,default:!0}},components:{Shape:E,ContextMenu:R,MarkLine:z,Area:F,Grid:nt},data:function(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1}},computed:Object(l["b"])(["componentData","curComponent","canvasStyleData","editor"]),mounted:function(){var t=this;this.$store.commit("getEditor"),p["a"].$on("hideArea",(function(){t.hideArea()}))},methods:{changeStyleWithScale:b["b"],handleMouseDown:function(t){var e=this;(!this.curComponent||"v-text"!=this.curComponent.component&&"rect-shape"!=this.curComponent.component)&&t.preventDefault(),this.hideArea();var n=this.editor.getBoundingClientRect();this.editorX=n.x,this.editorY=n.y;var o=t.clientX,a=t.clientY;this.start.x=o-this.editorX,this.start.y=a-this.editorY,this.isShowArea=!0;var i=function(t){e.width=Math.abs(t.clientX-o),e.height=Math.abs(t.clientY-a),t.clientX<o&&(e.start.x=t.clientX-e.editorX),t.clientY<a&&(e.start.y=t.clientY-e.editorY)},r=function t(n){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",t),n.clientX!=o||n.clientY!=a?e.createGroup():e.hideArea()};document.addEventListener("mousemove",i),document.addEventListener("mouseup",r)},hideArea:function(){this.isShowArea=0,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup:function(){var t=this,e=this.getSelectArea();if(e.length<=1)this.hideArea();else{var n=1/0,o=1/0,a=-1/0,i=-1/0;e.forEach((function(e){var r={};"Group"==e.component?e.propValue.forEach((function(e){var c=Object(A["a"])("#component".concat(e.id)).getBoundingClientRect();r.left=c.left-t.editorX,r.top=c.top-t.editorY,r.right=c.right-t.editorX,r.bottom=c.bottom-t.editorY,r.left<o&&(o=r.left),r.top<n&&(n=r.top),r.right>a&&(a=r.right),r.bottom>i&&(i=r.bottom)})):r=Object(L["a"])(e.style),r.left<o&&(o=r.left),r.top<n&&(n=r.top),r.right>a&&(a=r.right),r.bottom>i&&(i=r.bottom)})),this.start.x=o,this.start.y=n,this.width=a-o,this.height=i-n,this.$store.commit("setAreaData",{style:{left:o,top:n,width:this.width,height:this.height},components:e})}},getSelectArea:function(){var t=this,e=[],n=this.start,o=n.x,a=n.y;return this.componentData.forEach((function(n){if(!n.isLock){var i=Object(L["a"])(n.style),r=i.left,c=i.top,l=i.width,s=i.height;o<=r&&a<=c&&r+l<=o+t.width&&c+s<=a+t.height&&e.push(n)}})),e},handleContextMenu:function(t){t.stopPropagation(),t.preventDefault();var e=t.target,n=t.offsetY,o=t.offsetX;while(e instanceof SVGElement)e=e.parentNode;while(!e.className.includes("editor"))o+=e.offsetLeft,n+=e.offsetTop,e=e.parentNode;this.$store.commit("showContextMenu",{top:n,left:o})},getShapeStyle:function(t){var e={};return["width","height","top","left","rotate"].forEach((function(n){"rotate"!=n?e[n]=t[n]+"px":e.transform="rotate("+t[n]+"deg)"})),e},getComponentStyle:function(t){return Object(L["b"])(t,["top","left","width","height","rotate"])},handleInput:function(t,e){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(t,e)})},getTextareaHeight:function(t,e){var n=t.style,o=n.lineHeight,a=n.fontSize,i=n.height;""===o&&(o=1.5);var r=(e.split("<br>").length-1)*o*a;return i>r?i:r}}},at=ot,it=(n("7d5c"),Object($["a"])(at,r,c,!1,null,"4bb68cfa",null)),rt=it.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"jsonMonaco"},[n("MonacoEditor",{key:t.randomkey,attrs:{changeThrottle:t.changeThrottle,code:t.code,editorOptions:t.options,height:t.height,highlighted:t.highlighted,language:t.language,width:t.width},on:{codeChange:t.onCodeChange,mounted:t.onMounted}})],1)},lt=[],st=n("6372"),ut=n.n(st),dt={name:"monacoEditor",data:function(){return{code:"",editor:""}},props:{randomkey:{type:String,default:"1231231",require:!1},language:{type:String,default:"json",require:!1},height:{type:String,default:"100%",require:!1},changeThrottle:{type:Number,default:0,require:!1},highlighted:{type:Array,default:function(){return[]},require:!1},width:{type:String,default:"100%",require:!1},options:{type:Object,default:function(){return{}},require:!1}},components:{MonacoEditor:ut.a},methods:{onMounted:function(t){this.editor=t},onCodeChange:function(t){alert(this.editor.getValue())}}},pt=dt,ht=(n("df11"),Object($["a"])(pt,ct,lt,!1,null,"7d80c90f",null)),mt=ht.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-list",on:{dragstart:t.handleDragStart}},t._l(t.componentList,(function(e,o){return n("div",{key:o,staticClass:"list",attrs:{draggable:"","data-index":o}},[n("span",{staticClass:"iconfont",class:"icon-"+e.icon}),n("span",[t._v(t._s(e.label))])])})),0)},bt=[],vt=n("4e67"),yt={data:function(){return{componentList:vt["c"]}},methods:{handleDragStart:function(t){t.dataTransfer.setData("index",t.target.dataset.index)}}},gt=yt,Ct=(n("9bfa"),Object($["a"])(gt,ft,bt,!1,null,"1ee4c05c",null)),xt=Ct.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attr-list"},[n("el-form",[t._l(t.styleKeys,(function(e,o){var a=e.key,i=e.label;return n("el-form-item",{key:o,attrs:{label:i}},["borderColor"==a||"color"==a||"backgroundColor"==a?n("el-color-picker",{model:{value:t.curComponent.style[a],callback:function(e){t.$set(t.curComponent.style,a,e)},expression:"curComponent.style[key]"}}):t.selectKey.includes(a)?n("el-select",{model:{value:t.curComponent.style[a],callback:function(e){t.$set(t.curComponent.style,a,e)},expression:"curComponent.style[key]"}},["textAlign"==a?t._l(t.textAlignOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})):"borderStyle"==a?t._l(t.borderStyleOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})):t._l(t.verticalAlignOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],2):n("el-input",{attrs:{type:"number"},model:{value:t.curComponent.style[a],callback:function(e){t.$set(t.curComponent.style,a,t._n(e))},expression:"curComponent.style[key]"}})],1)})),t.curComponent&&!t.excludes.includes(t.curComponent.component)?n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.curComponent.propValue,callback:function(e){t.$set(t.curComponent,"propValue",e)},expression:"curComponent.propValue"}})],1):t._e()],2)],1)},St=[],wt=(n("d217"),[{key:"left",label:"x 坐标"},{key:"top",label:"y 坐标"},{key:"width",label:"宽"},{key:"height",label:"高"},{key:"color",label:"颜色"},{key:"backgroundColor",label:"背景色"},{key:"borderWidth",label:"边框宽度"},{key:"borderStyle",label:"边框风格"},{key:"borderColor",label:"边框颜色"},{key:"borderRadius",label:"边框半径"},{key:"fontSize",label:"字体大小"},{key:"fontWeight",label:"字体粗细"},{key:"lineHeight",label:"行高"},{key:"letterSpacing",label:"字间距"},{key:"textAlign",label:"左右对齐"},{key:"verticalAlign",label:"上下对齐"},{key:"opacity",label:"透明度"}]),jt={data:function(){return{excludes:["Picture","Group"],textAlignOptions:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],borderStyleOptions:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"}],verticalAlignOptions:[{label:"上对齐",value:"top"},{label:"居中对齐",value:"middle"},{label:"下对齐",value:"bottom"}],selectKey:["textAlign","borderStyle","verticalAlign"],attrNameData:wt}},computed:{styleKeys:function(){if(this.$store.state.curComponent){var t=Object.keys(this.$store.state.curComponent.style);return this.attrNameData.filter((function(e){return t.includes(e.key)}))}return[]},curComponent:function(){return this.$store.state.curComponent}}},kt=jt,Dt=(n("8b99"),Object($["a"])(kt,Ot,St,!1,null,"7bc91b9b",null)),Mt=Dt.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"animation-list"},[n("div",{staticClass:"div-animation"},[n("el-button",{on:{click:function(e){t.isShowAnimation=!0}}},[t._v("添加动画")]),n("el-button",{on:{click:t.previewAnimate}},[t._v("预览动画")]),n("div",t._l(t.curComponent.animations,(function(e,o){return n("el-tag",{key:o,attrs:{closable:""},on:{close:function(e){return t.removeAnimation(o)}}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),n("Modal",{model:{value:t.isShowAnimation,callback:function(e){t.isShowAnimation=e},expression:"isShowAnimation"}},[n("el-tabs",{model:{value:t.animationActiveName,callback:function(e){t.animationActiveName=e},expression:"animationActiveName"}},t._l(t.animationClassData,(function(e){return n("el-tab-pane",{key:e.label,attrs:{label:e.label,name:e.label}},[n("el-scrollbar",{staticClass:"animate-container"},t._l(e.children,(function(e,o){return n("div",{key:o,staticClass:"animate",on:{mouseover:function(n){t.hoverPreviewAnimate=e.value},click:function(n){return t.addAnimation(e)}}},[n("div",{class:[t.hoverPreviewAnimate===e.value&&e.value+" animated"]},[t._v(" "+t._s(e.label)+" ")])])})),0)],1)})),1)],1)],1)},_t=[],Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"modal-bg",on:{click:t.hide}},[n("div",{staticClass:"fadeInLeft animated modal",on:{click:t.stopPropagation}},[t._t("default")],2)]):t._e()},Lt=[],At={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide:function(){this.$emit("change")},stopPropagation:function(t){t.stopPropagation()}}},It=At,Nt=(n("0fce"),Object($["a"])(It,Et,Lt,!1,null,"c9b456b2",null)),Pt=Nt.exports,Vt=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedInRight"},{label:"光速从左进入",value:"lightSpeedInLeft"},{label:"光速从右退出",value:"lightSpeedOutRight"},{label:"光速从左退出",value:"lightSpeedOutLeft"},{label:"Y轴旋转",value:"flip"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}],Tt={components:{Modal:Pt},data:function(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:Vt,showAnimatePanel:!1}},computed:Object(l["b"])(["curComponent"]),methods:{addAnimation:function(t){this.$store.commit("addAnimation",t),this.isShowAnimation=!1},previewAnimate:function(){p["a"].$emit("runAnimation")},removeAnimation:function(t){this.$store.commit("removeAnimation",t)}}},Rt=Tt,Bt=(n("e285"),Object($["a"])(Rt,$t,_t,!1,null,null,null)),Ut=Bt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-list"},[n("div",{staticClass:"div-events"},[n("el-button",{on:{click:function(e){t.isShowEvent=!0}}},[t._v("添加事件")]),n("div",t._l(Object.keys(t.curComponent.events),(function(e){return n("el-tag",{key:e,attrs:{closable:""},on:{close:function(n){return t.removeEvent(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),n("Modal",{model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}},[n("el-tabs",{model:{value:t.eventActiveName,callback:function(e){t.eventActiveName=e},expression:"eventActiveName"}},t._l(t.eventList,(function(e){return n("el-tab-pane",{key:e.key,staticStyle:{padding:"0 20px"},attrs:{label:e.label,name:e.key}},["redirect"==e.key?n("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:e.param,callback:function(n){t.$set(e,"param",n)},expression:"item.param"}}):t._e(),"alert"==e.key?n("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:e.param,callback:function(n){t.$set(e,"param",n)},expression:"item.param"}}):t._e(),n("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(n){return t.addEvent(e.key,e.param)}}},[t._v("确定")])],1)})),1)],1)],1)},Xt=[],qt=(n("b29b"),{redirect:function(t){t&&(window.location.href=t)},alert:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){t&&alert(t)}))}),zt={methods:qt},Wt=[{key:"redirect",label:"跳转事件",event:qt.redirect,param:""},{key:"alert",label:"alert 事件",event:qt.alert,param:""}],Gt={components:{Modal:Pt},data:function(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:Wt}},computed:Object(l["b"])(["curComponent"]),methods:{addEvent:function(t,e){this.isShowEvent=!1,this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},Ht=Gt,Kt=(n("0bd0"),Object($["a"])(Ht,Yt,Xt,!1,null,"603b34da",null)),Jt=Kt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"toolbar"},[n("el-button",{on:{click:t.undo}},[t._v("撤消")]),n("el-button",{on:{click:t.redo}},[t._v("重做")]),n("label",{staticClass:"insert",attrs:{for:"input"}},[t._v("插入图片")]),n("input",{attrs:{id:"input",hidden:"",type:"file"},on:{change:t.handleFileChange}}),n("el-button",{staticStyle:{"margin-left":"10px"},on:{click:t.preview}},[t._v("预览")]),n("el-button",{on:{click:t.save}},[t._v("保存")]),n("el-button",{on:{click:t.clearCanvas}},[t._v("清空画布")]),n("el-button",{attrs:{disabled:!t.areaData.components.length},on:{click:t.compose}},[t._v("组合")]),n("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock||"Group"!=t.curComponent.component},on:{click:t.decompose}},[t._v("拆分 ")]),n("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock},on:{click:t.lock}},[t._v("锁定")]),n("el-button",{attrs:{disabled:!t.curComponent||!t.curComponent.isLock},on:{click:t.unlock}},[t._v("解锁")]),n("div",{staticClass:"canvas-config"},[n("span",[t._v("画布大小")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:t.canvasStyleData.width},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"width",e.target.value)}}}),n("span",[t._v("*")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:t.canvasStyleData.height},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"height",e.target.value)}}})]),n("div",{staticClass:"canvas-config"},[n("span",[t._v("画布比例")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],domProps:{value:t.scale},on:{input:[function(e){e.target.composing||(t.scale=e.target.value)},t.handleScaleChange]}}),t._v(" % ")]),n("el-link",{attrs:{href:"https://github.com/dgiot/dgiot-konva-editior"}},[t._v("github")])],1),n("Preview",{on:{change:t.handlePreviewChange},model:{value:t.isShowPreview,callback:function(e){t.isShowPreview=e},expression:"isShowPreview"}})],1)},Qt=[],Zt=n("ac24"),te=n("eae4"),ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"bg"},[n("el-button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]),n("div",{staticClass:"canvas-container"},[n("div",{staticClass:"canvas",style:{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}},t._l(t.componentData,(function(t,e){return n("ComponentWrapper",{key:e,attrs:{config:t}})})),1)])],1):t._e()},ne=[],oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.handleClick}},[n(t.config.component,{tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{propValue:t.config.propValue,element:t.config}})],1)},ae=[],ie={props:{config:{type:Object,require:!0}},mounted:function(){m(this.$el,this.config.animations)},mixins:[zt],methods:{getStyle:L["b"],handleClick:function(){var t=this,e=this.config.events;Object.keys(e).forEach((function(n){t[n](e[n])}))}}},re=ie,ce=(n("7e5e"),Object($["a"])(re,oe,ae,!1,null,"5353b48c",null)),le=ce.exports,se={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},components:{ComponentWrapper:le},computed:Object(l["b"])(["componentData","canvasStyleData"]),methods:{changeStyleWithScale:b["b"],getStyle:L["b"],close:function(){this.$emit("change",!1)}}},ue=se,de=(n("555e"),Object($["a"])(ue,ee,ne,!1,null,"77c8e7f0",null)),pe=de.exports,he={components:{Preview:pe},data:function(){return{isShowPreview:!1,needToChange:["top","left","width","height","fontSize","borderWidth"],scale:"100%",timer:null}},computed:Object(l["b"])(["componentData","canvasStyleData","areaData","curComponent"]),created:function(){p["a"].$on("preview",this.preview),p["a"].$on("save",this.save),p["a"].$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{format:function(t){var e=this.scale;return t*parseInt(e)/100},getOriginStyle:function(t){var e=this.canvasStyleData.scale,n=t/(parseInt(e)/100);return n},handleScaleChange:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.scale=~~t.scale||1;var e=Object(A["b"])(t.componentData);e.forEach((function(e){Object.keys(e.style).forEach((function(n){t.needToChange.includes(n)&&(e.style[n]=Math.ceil(t.format(t.getOriginStyle(e.style[n]))))}))})),t.$store.commit("setComponentData",e),t.$store.commit("setCanvasStyle",Object(i["a"])(Object(i["a"])({},t.canvasStyleData),{},{scale:t.scale}))}),1e3)},lock:function(){this.$store.commit("lock")},unlock:function(){this.$store.commit("unlock")},compose:function(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose:function(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo:function(){this.$store.commit("undo")},redo:function(){this.$store.commit("redo")},handleFileChange:function(t){var e=this,n=t.target.files[0];if(n.type.includes("image")){var o=new FileReader;o.onload=function(t){var n=t.target.result,o=new Image;o.onload=function(){e.$store.commit("addComponent",{component:Object(i["a"])(Object(i["a"])({},vt["a"]),{},{id:Object(Zt["a"])(),component:"Picture",label:"图片",icon:"",propValue:n,style:Object(i["a"])(Object(i["a"])({},vt["b"]),{},{top:0,left:0,width:o.width,height:o.height})})}),e.$store.commit("recordSnapshot"),document.querySelector("#input").setAttribute("type","text"),document.querySelector("#input").setAttribute("type","file")},o.src=n},o.readAsDataURL(n)}else Object(te["a"])("只能插入图片")},preview:function(){this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},save:function(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData)),this.$message.success("保存成功")},clearCanvas:function(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange:function(){this.$store.commit("setEditMode","edit")}}},me=he,fe=(n("e518"),Object($["a"])(me,Ft,Qt,!1,null,"b1b812b6",null)),be=fe.exports,ve=n("2c7d"),ye={components:{Editor:rt,MonacoEditor:mt,ComponentList:xt,AttrList:Mt,AnimationList:Ut,EventList:Jt,Toolbar:be},data:function(){return{activeName:"monacoEditor"}},computed:Object(i["a"])({topoCode:function(){return JSON.stringify(this.$store.state.componentData)},randomkey:function(){return Math.round(new Date/1e3)+""},options:function(){return{selectOnLineNumbers:!0,language:"text",theme:"vs",value:JSON.stringify(this.$store.state.componentData),roundedSelection:!0,readOnly:!0,cursorStyle:"line",automaticLayout:!0,glyphMargin:!0}}},Object(l["b"])(["componentData","curComponent","isClickComponent","canvasStyleData","editor"])),created:function(){this.restore(),Object(ve["b"])()},mounted:function(){this.$refs.MonacoEditor.code=this.topoCode},methods:{restore:function(){localStorage.getItem("canvasData")&&this.$store.commit("setComponentData",this.resetID(JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&this.$store.commit("setCanvasStyle",JSON.parse(localStorage.getItem("canvasStyle")))},resetID:function(t){return t.forEach((function(t){t.id=Object(Zt["a"])()})),t},handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.dataTransfer.getData("index"),n=this.editor.getBoundingClientRect();if(e){var o=Object(A["b"])(vt["c"][e]);o.style.top=t.clientY-n.y,o.style.left=t.clientX-n.x,o.id=Object(Zt["a"])(),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleMouseDown:function(){this.$store.commit("setClickComponentStatus",!1)},deselectCurComponent:function(t){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),2!=t.button&&this.$store.commit("hideContextMenu")}}},ge=ye,Ce=(n("21bb"),Object($["a"])(ge,o,a,!1,null,null,null));e["default"]=Ce.exports},be35:function(t,e,n){},c812:function(t,e,n){"use strict";n("4fe4")},c8d9:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rect-shape"},[n("v-text",{attrs:{element:t.element,propValue:t.element.propValue}})],1)},a=[],i={name:"RectShape",props:{propValue:{type:String,require:!0},element:{type:Object}}},r=i,c=(n("264a"),n("838c")),l=Object(c["a"])(r,o,a,!1,null,"bdd91de6",null);e["default"]=l.exports},d3cc:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"v-button"},[t._v(t._s(t.propValue))])},a=[],i={name:"VButton",props:{propValue:{type:String,default:""},element:{type:Object}}},r=i,c=(n("225c"),n("838c")),l=Object(c["a"])(r,o,a,!1,null,"6a60aeb5",null);e["default"]=l.exports},d56e:function(t,e,n){},d647:function(t,e,n){},df11:function(t,e,n){"use strict";n("1ed0")},e009:function(t,e,n){"use strict";n("7bcc")},e285:function(t,e,n){"use strict";n("358a")},e518:function(t,e,n){"use strict";n("91ec")},e7a4:function(t,e,n){},eae4:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("4418");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;Object(o["Message"])({message:t,type:e,duration:n})}},f6cd:function(t,e,n){},fa7d:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c}));var o=n("8081"),a=n("1ec0");function i(t){if("object"===Object(o["a"])(t)){var e=Array.isArray(t)?[]:{};for(var n in t)"object"===Object(o["a"])(t[n])?e[n]=i(t[n]):e[n]=t[n];return e}return t}function r(t,e,n){var o=t[e];t[e]=t[n],a["default"].set(t,e,t[n]),a["default"].set(t,n,o)}function c(t){return document.querySelector(t)}},fed9:function(t,e,n){}});